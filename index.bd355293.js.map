{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-31bc534db3c2e40b.js","src/js/api-service.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/js/library-functions.js","src/js/btn-state.js","src/js/stars.js","src/js/cards-rendering.js","src/js/my-library.js","src/js/modal.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"Ujaud\\\":\\\"index.bd355293.js\\\",\\\"lp5u4\\\":\\\"sprite.5d6e6df3.svg\\\",\\\"kPZpr\\\":\\\"catalog.5a8a559f.js\\\"}\"));","import axios from 'axios';\n\nexport default class APIService {\n  constructor() {\n    this.key = '682127ed972e56f6bb70ae743d23c1d7';\n    this.baseURL = 'https://api.themoviedb.org/3/';\n    this.page = 0;\n  }\n\n  resetPage() {\n    this.page = 0;\n  }\n\n  async getTrends(param, page) {\n    if (arguments.length < 2) {\n      try {\n        this.page += 1;\n        const response = await axios.get(\n          `${this.baseURL}trending/movie/${param}?api_key=${this.key}&page=${this.page}`\n        );\n\n        console.log(response.data.results);\n\n        return response.data.results;\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      try {\n        const response = await axios.get(\n          `${this.baseURL}trending/movie/${param}?api_key=${this.key}&page=${page}`\n        );\n\n        console.log(response.data);\n\n        return response.data;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n\n  async getUpcoming() {\n    try {\n      const response = await axios.get(\n        `${this.baseURL}movie/upcoming?api_key=${this.key}`\n      );\n\n      console.log(response.data.results);\n\n      return response.data.results;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async searchMovieByQuery(query, page) {\n    if (arguments.length < 2) {\n      try {\n        this.page += 1;\n        const response = await axios.get(\n          `${this.baseURL}search/movie?api_key=${this.key}&query=${query}&page=${this.page}`\n        );\n\n        return response.data.results;\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      try {\n        const response = await axios.get(\n          `${this.baseURL}search/movie?api_key=${this.key}&query=${query}&page=${page}`\n        );\n\n        return response.data;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n\n  async getMovieInfo(id) {\n    try {\n      const response = await axios.get(\n        `${this.baseURL}movie/${id}?api_key=${this.key}`\n      );\n\n      console.log(response.data);\n\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async getMovieTrailer(id) {\n    try {\n      const response = await axios.get(\n        `${this.baseURL}movie/${id}/videos?api_key=${this.key}`\n      );\n\n      console.log(response.data.results[0]);\n\n      return response.data.results[0];\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async getGenresList() {\n    try {\n      const response = await axios.get(\n        `${this.baseURL}genre/movie/list?api_key=${this.key}`\n      );\n\n      console.log(response.data.genres);\n\n      return response.data.genres;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async getMovieContries() {\n    try {\n      const response = await axios.get(\n        `${this.baseURL}configuration/countries?api_key=${this.key}`\n      );\n\n      console.log(response.data);\n\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","export default class LibraryAPI {\n  constructor() {\n    this.keyValue = 'library';\n    this.movies = localStorage.getItem(this.keyValue);\n  }\n\n  updateLocalStorage() {\n    localStorage.setItem(this.keyValue, JSON.stringify(this.movies));\n    console.log(this.movies, 'updated localS');\n  }\n\n  setLibrary() {\n    const localStorageData = localStorage.getItem(this.keyValue);\n\n    if (localStorageData) {\n      this.movies = JSON.parse(localStorageData);\n    } else {\n      localStorage.setItem(this.keyValue, JSON.stringify([]));\n      this.movies = [];\n    }\n\n    console.log(this.movies, 'this.movies');\n  }\n\n  addMovie(movie) {\n    this.movies.push(movie);\n    this.updateLocalStorage();\n  }\n\n  deleteMovie(movie) {\n    const index = this.movies.findIndex(m => m.id === movie.id);\n    this.movies.splice(index, 1);\n    this.updateLocalStorage();\n  }\n}\n","import LibraryAPI from './library-functions';\n\nconst library = new LibraryAPI();\n\nlibrary.setLibrary();\n\nexport default class BtnState {\n  constructor(btn, btnStateStorageKey, movie) {\n    this.btn = btn;\n    this.btnStateStorageKey = btnStateStorageKey;\n    this.movie = movie;\n  }\n\n  setBtnState() {\n    const isInLibrary = library.movies.some(m => m.id === this.movie.id);\n    if (isInLibrary) {\n      this.btn.setAttribute('data-action', 'remove');\n      this.btn.textContent = 'Remove from library';\n      // console.log(isInLibrary);\n    } else {\n      this.btn.setAttribute('data-action', 'add');\n      this.btn.textContent = 'Add to library';\n      // console.log(isInLibrary, 'else');\n    }\n\n    this.btn.addEventListener('click', () => {\n      if (this.btn.getAttribute('data-action') === 'add') {\n        this.toAdd();\n      } else {\n        this.toRemove();\n        //   console.log('Callback:', this.fetchFunction);\n      }\n    });\n  }\n\n  toAdd() {\n    library.addMovie(this.movie);\n    this.btn.removeEventListener('click', this.toAdd);\n    this.btn.setAttribute('data-action', 'remove');\n    localStorage.setItem(this.btnStateStorageKey, 'remove');\n    this.btn.textContent = 'Remove from library';\n    //   console.log(this.btn.getAttribute('data-action'));\n  }\n\n  toRemove() {\n    library.deleteMovie(this.movie);\n    this.btn.removeEventListener('click', this.toRemove);\n    this.btn.setAttribute('data-action', 'add');\n    localStorage.setItem(this.btnStateStorageKey, 'add');\n    this.btn.textContent = 'Add to library';\n    //   console.log(this.btn.getAttribute('data-action'));\n  }\n}\n","const emptyStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_405_766)\" stroke-linejoin=\"round\"/>\n<defs>\n<linearGradient id=\"paint0_linear_405_766\" x1=\"3.375\" y1=\"2.625\" x2=\"13.5\" y2=\"16.5\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\nconst fullStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"rgba(248, 65, 25, 1)\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_405_766)\" stroke-linejoin=\"round\"/>\n<defs>\n<linearGradient id=\"paint0_linear_405_766\" x1=\"3.375\" y1=\"2.625\" x2=\"13.5\" y2=\"16.5\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\nconst halfStar = `<svg class=\"star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z\" stroke=\"url(#paint0_linear_148_6991)\" stroke-linejoin=\"round\"/>\n<path d=\"M9 1.6875V12.7969L4.14844 16.3125L6.04688 10.6875L1.125 7.3125H7.17188L9 1.6875Z\" fill=\"url(#paint1_linear_148_6991)\"/>\n<defs>\n<linearGradient id=\"paint0_linear_148_6991\" x1=\"3.04877\" y1=\"2.73251\" x2=\"13.478\" y2=\"16.7124\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n<linearGradient id=\"paint1_linear_148_6991\" x1=\"2.08688\" y1=\"2.73251\" x2=\"12.1506\" y2=\"9.47748\" gradientUnits=\"userSpaceOnUse\">\n<stop stop-color=\"#F84119\"/>\n<stop offset=\"1\" stop-color=\"#F89F19\" stop-opacity=\"0.68\"/>\n</linearGradient>\n</defs>\n</svg>`;\n\nexport { emptyStar, fullStar, halfStar };\n","import { emptyStar, fullStar, halfStar } from './stars';\n\nconst axios = require('axios').default;\n\nimport APIService from './api-service';\nconst apiService = new APIService();\nlet genreList;\n\ngetGenresList();\n\nasync function getGenresList() {\n  try {\n    const response = await apiService.getGenresList();\n    return (genreList = response);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default async function renderMoviesCards(movies, selector) {\n  const movieList = document.querySelector(`${selector}`);\n  let markup = '';\n  for (const movie of movies) {\n    const {\n      id,\n      poster_path: poster,\n      title,\n      release_date: date,\n      vote_average: rating,\n    } = movie;\n\n    const movieSrc = await getImg(poster, title);\n    const movieGenre = await getGenre(id);\n    const movieYear = await getYear(date);\n    const starRating = await createStarRating(rating);\n\n    markup += `<li class='cards__list-item' data-id='${id}'>\n                    \n    <img class='cards__list-img' loading=\"lazy\" ${movieSrc} width='395' height='574'/>\n    \n                   <div class='weekly-trends__overlay'></div>\n                    <div class='cards__list-search'>                       \n                        <div class='cards__bloc-stars'>\n                          <h3 class='cards__list-title'>${title}</h3>\n                          <div class='cards__list-text'>${movieGenre}|${movieYear}<span class='cards__list-span'></span></div>\n                        </div>  \n                        \n                        \n                    </div>\n                    <div class='cards__list-stars'>${starRating}</div>\n                </li>`;\n  }\n\n  if (!movieList) {\n    return;\n  }\n  movieList.innerHTML = markup;\n}\n\nasync function getYear(data) {\n  if (!data) {\n    return 'There is no release date';\n  }\n\n  const year = await data.slice(0, 4);\n  return year;\n}\n\nasync function getGenre(movieId) {\n  const API_KEY = '682127ed972e56f6bb70ae743d23c1d7';\n  const URL = 'https://api.themoviedb.org/3/movie/';\n\n  try {\n    const response = await axios.get(`${URL}${movieId}`, {\n      params: {\n        api_key: API_KEY,\n      },\n    });\n\n    if (response.data.genres.length === 0) {\n      return error;\n    }\n\n    const genres = response.data.genres\n      .slice(0, 2)\n      .map(genre => genre.name)\n      .join(', ');\n\n    return genres;\n  } catch (error) {\n    console.log(error);\n    return 'There are no genres';\n  }\n}\n\nfunction createStarRating(data) {\n  let ratingStars = '';\n\n  if (!data) {\n    ratingStars = `${emptyStar.repeat(5)}`;\n    return `<div>${ratingStars}</div>`;\n  }\n\n  const rating = Math.round(data);\n\n  switch (rating) {\n    case 0:\n      ratingStars = `${emptyStar.repeat(5)}`;\n      break;\n    case 1:\n      ratingStars = `${halfStar}${emptyStar.repeat(4)}`;\n      break;\n    case 2:\n      ratingStars = `${fullStar}${emptyStar.repeat(4)}`;\n      break;\n    case 3:\n      ratingStars = `${fullStar}${halfStar}${emptyStar.repeat(3)}`;\n      break;\n    case 4:\n      ratingStars = `${fullStar.repeat(2)}${emptyStar.repeat(3)}`;\n      break;\n    case 5:\n      ratingStars = `${fullStar.repeat(2)}${halfStar}${emptyStar.repeat(2)}`;\n      break;\n    case 6:\n      ratingStars = `${fullStar.repeat(3)}${emptyStar.repeat(2)}`;\n      break;\n    case 7:\n      ratingStars = `${fullStar.repeat(3)}${halfStar}${emptyStar}`;\n      break;\n    case 8:\n      ratingStars = `${fullStar.repeat(4)}${emptyStar}`;\n      break;\n    case 9:\n      ratingStars = `${fullStar.repeat(4)}${halfStar}`;\n      break;\n    case 10:\n      ratingStars = `${fullStar.repeat(5)}`;\n      break;\n    default:\n      throw new Error('Invalid rating');\n  }\n\n  return `<div>${ratingStars}</div>`;\n}\n\nfunction getImg(poster, title) {\n  /* if (poster === null || !poster) {\n    return `src='${comingSoonImg}' alt='${title}'`;\n  } */\n\n  return `\n    srcset=\"\n                https://image.tmdb.org/t/p/w500/${poster} 500w,\n                https://image.tmdb.org/t/p/w300/${poster} 342w,\n                https://image.tmdb.org/t/p/w185/${poster} 185w\"\n        src=\"https://image.tmdb.org/t/p/w500/${poster}\"\n\n        \" sizes=\" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw\"   \n     alt='${title}'`;\n}\n\nexport { createStarRating };\n","import renderMoviesCards from './cards-rendering';\nimport LibraryAPI from './library-functions';\n\nconst library = new LibraryAPI();\nlibrary.setLibrary();\ncheckStorage();\n\nexport function checkStorage() {\n  library.setLibrary();\n  if (library.movies.length === 0) {\n    if (!document.querySelector('.my-lib__no-movies')) {\n      return;\n    }\n    document\n      .querySelector('.my-lib__no-movies')\n      .classList.remove('visually-hidden');\n    document.querySelector('.my-lib__gallery-list').innerHTML = '';\n  } else {\n    renderMoviesCards(library.movies, '.my-lib__gallery-list');\n  }\n}\n","import APIService from './api-service';\nimport sprite from '../images/sprite.svg';\nimport BtnState from './btn-state';\nimport { checkStorage } from './my-library';\n\nconst apiService = new APIService();\n\nconst catalog = document.getElementById('catalg');\nconst myLibGallery = document.getElementById('mylibraryMovielist');\nconst weeklyTrends = document.getElementById('catalogMovielist');\nconst modalWindow = document.querySelector('.modal-film');\nconst overlay = document.querySelector('.overlay');\n\naddModalListener(catalog);\naddModalListener(weeklyTrends);\naddModalListener(myLibGallery);\n\nfunction addModalListener(listRef) {\n  if (!listRef) {\n    return;\n  }\n  listRef.addEventListener('click', onMovieCardClick);\n}\n\nasync function onMovieCardClick(e) {\n  if (!e.target.closest('.movielist-item')) {\n    return;\n  }\n\n  try {\n    const movieID = e.target.closest('.movielist-item').getAttribute('data-id');\n    const movieData = await apiService.getMovieInfo(movieID);\n    const markup = createMarkup(movieData);\n    updateModal(markup);\n    const btnModalClose = document.querySelector('.modal-film__close');\n    btnModalClose.addEventListener('click', closeModalWindows);\n    openModal();\n    const toLibraryBtn = document.getElementById('mylibrary');\n    const btnApi = new BtnState(toLibraryBtn, 'modal-btn-attr', movieData);\n    btnApi.setBtnState();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction openModal() {\n  /* const lockPaddingValue = window.innerWidth - document.body.offsetWidth + 'px'; */\n\n  modalWindow.classList.remove('hidden');\n  overlay.classList.remove('hidden');\n  /* document.body.style.paddingRight = lockPaddingValue; */\n  document.body.style.overflow = 'hidden';\n}\n\nfunction updateModal(markup) {\n  modalWindow.innerHTML = markup;\n}\n\nfunction createMarkup({\n  id,\n  poster_path,\n  title,\n  overview,\n  popularity,\n  vote_average,\n  vote_count,\n  genres,\n}) {\n  const getMoivePoster = getPoster(poster_path);\n  function getPoster(poster_path) {\n    /* if (poster_path === null || !poster_path) {\n      return `src='${comingSoonImg}'`;\n    } */\n    return `srcset=\"\n                https://image.tmdb.org/t/p/w500/${poster_path} 500w,\n                https://image.tmdb.org/t/p/w300/${poster_path} 342w,\n                https://image.tmdb.org/t/p/w185/${poster_path} 185w\"\n        src=\"https://image.tmdb.org/t/p/w500/${poster_path}\"\n\n        \" sizes=\" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw\"   \n    `;\n  }\n\n  return `<div class=\"modal-film__container\" data-id=${id}>\n  <button class=\"modal-film__close\">\n    <svg width=\"18\" height=\"18\" class=\"modal-film__close-icon\">\n    <use href=\"${sprite}#icon-close2\"></use>       \n</svg>\n  </button>\n  <img ${getMoivePoster} loading=\"lazy\" alt=\"movie-poster\" class=\"modal-film__img\" />\n  <div class=\"modal-film__card\">\n    <h2 class=\"modal-film__title\">${title}</h2>\n    <div class=\"modal-film__blok\">\n      <ul class=\"modal-film__list attribute\">\n        <li class=\"modal-film__link\">Vote / Votes</li>\n        <li class=\"modal-film__link\">Popularity</li>\n        <li class=\"modal-film__link\">Genre</li>\n      </ul>\n\n      <ul class=\"modal-film__list\">\n        <li class=\"modal-film__link-item item-votes\">\n          <div class=\"vote\">${vote_average}</div>\n          &nbsp;/&nbsp;\n          <div class=\"votes\">${vote_count}</div>\n        </li>\n        <li class=\"modal-film__link-item popularity\">${popularity}</li>\n        <li class=\"modal-film__link-item genres\">${genres\n          .map(g => g.name)\n          .join(', ')}</li>\n      </ul>\n    </div>\n    <h3 class=\"modal-film__about\">ABOUT</h3>\n    <p class=\"modal-film__about-txt\">${overview}\n    </p>\n    <button class=\"btn\" id=\"mylibrary\" data-action=\"add\">Add to my library</button>`;\n}\n\nfunction closeModalWindows() {\n  modalWindow.classList.add('hidden');\n  overlay.classList.add('hidden');\n  /* document.body.style.paddingRight = '0px'; */\n  document.body.style.overflow = 'auto';\n  checkStorage();\n}\n\noverlay.addEventListener('click', closeModalWindows);\nwindow.addEventListener('keydown', function (e) {\n  if (e.key === 'Escape' && !modalWindow.classList.contains('hidden')) {\n    closeModalWindows();\n  }\n});\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2shzp","$55b58e231f028392$export$2e2bcd8739ae039","constructor","this","key","baseURL","page","resetPage","async","param","arguments","response","default","get","console","log","data","results","error","error1","query","error2","genres","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","$5eb95fe79d41ba2d$export$2e2bcd8739ae039","keyValue","movies","localStorage","getItem","updateLocalStorage","setItem","stringify","setLibrary","localStorageData","addMovie","movie","push","deleteMovie","index","findIndex","m","splice","$0f0a2b4861d8fd80$var$library","$0f0a2b4861d8fd80$export$2e2bcd8739ae039","btn","btnStateStorageKey","setBtnState","some","setAttribute","textContent","addEventListener","getAttribute","toAdd","toRemove","removeEventListener","$144aeb2db80114e2$export$2b9da15ffb823cb5","$144aeb2db80114e2$export$cf0b3d5a3c4c1ede","$144aeb2db80114e2$export$2f488d1c4c14505e","$a6921166aaa683a4$var$apiService","$a6921166aaa683a4$var$genreList","$a6921166aaa683a4$export$2e2bcd8739ae039","selector","movieList","document","querySelector","markup","poster_path","poster","title","release_date","date","vote_average","rating","$a6921166aaa683a4$var$getImg","$a6921166aaa683a4$var$getGenre","$a6921166aaa683a4$var$getYear","$a6921166aaa683a4$export$6be517bc11b1c020","innerHTML","slice","movieId","$a6921166aaa683a4$require$axios","params","api_key","map","genre","name","join","ratingStars","repeat","Math","round","getGenresList","$a6921166aaa683a4$var$getGenresList","$085d2f9f3e302aeb$var$library","$085d2f9f3e302aeb$export$cead25c4f636f79","classList","remove","$8a7e756c566dd1ea$var$apiService","$8a7e756c566dd1ea$var$catalog","getElementById","$8a7e756c566dd1ea$var$myLibGallery","$8a7e756c566dd1ea$var$weeklyTrends","$8a7e756c566dd1ea$var$modalWindow","$8a7e756c566dd1ea$var$overlay","$8a7e756c566dd1ea$var$addModalListener","listRef","$8a7e756c566dd1ea$var$onMovieCardClick","e","target","closest","movieID","movieData","getMovieInfo","$8a7e756c566dd1ea$var$updateModal","poster_path1","overview","popularity","vote_count","getMoivePoster","getPoster","$parcel$interopDefault","g","$8a7e756c566dd1ea$var$createMarkup","$8a7e756c566dd1ea$var$closeModalWindows","body","style","overflow","toLibraryBtn","add","window","contains"],"version":3,"file":"index.bd355293.js.map"}