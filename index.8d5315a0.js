function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},s={},o=n.parcelRequired7c6;null==o&&((o=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},n.parcelRequired7c6=o),o.register("kyEFX",(function(t,i){var n,a;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var s={};n=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)s[t[i]]=e[t[i]]},a=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("bUb57",(function(e,t){const i=document.getElementById("menu"),n=document.getElementById("navi"),a=document.getElementById("overlay");i.addEventListener("click",(()=>{n.style.left="0",a.style.display="block"})),a.addEventListener("click",(()=>{n.style.left="-64%",a.style.display="none"}));const s=document.getElementById("switch");let o="true"===localStorage.getItem("isLight");document.body.classList.toggle("light",o),s.onclick=function(){o=!o,document.body.classList.toggle("light",o),localStorage.setItem("isLight",o)};const r=window.location.href,l=document.querySelectorAll(".mobile-menu__link, .header__nav-link");if(l[0].classList.add("current__nav-link"),l[3].classList.add("current__nav-link"),!r.includes("index"))return r.includes("catalog")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.add("current__nav-link"),void l[4].classList.add("current__nav-link")):r.includes("library")?(l[0].classList.remove("current__nav-link"),l[3].classList.remove("current__nav-link"),l[1].classList.remove("current__nav-link"),l[4].classList.remove("current__nav-link"),l[2].classList.add("current__nav-link"),void l[5].classList.add("current__nav-link")):void 0})),o("kyEFX").register(JSON.parse('{"7bk21":"index.8d5315a0.js","lp5u4":"sprite.5d6e6df3.svg","42Y9m":"catalog.a0e6cde3.js"}')),o("bUb57");const r='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_405_766)" stroke-linejoin="round"/>\n<defs>\n<linearGradient id="paint0_linear_405_766" x1="3.375" y1="2.625" x2="13.5" y2="16.5" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>',l='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="rgba(248, 65, 25, 1)" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_405_766)" stroke-linejoin="round"/>\n<defs>\n<linearGradient id="paint0_linear_405_766" x1="3.375" y1="2.625" x2="13.5" y2="16.5" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>',c='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_148_6991)" stroke-linejoin="round"/>\n<path d="M9 1.6875V12.7969L4.14844 16.3125L6.04688 10.6875L1.125 7.3125H7.17188L9 1.6875Z" fill="url(#paint1_linear_148_6991)"/>\n<defs>\n<linearGradient id="paint0_linear_148_6991" x1="3.04877" y1="2.73251" x2="13.478" y2="16.7124" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n<linearGradient id="paint1_linear_148_6991" x1="2.08688" y1="2.73251" x2="12.1506" y2="9.47748" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>';var d=o("2shzp");class u{constructor(){this.key="682127ed972e56f6bb70ae743d23c1d7",this.baseURL="https://api.themoviedb.org/3/",this.page=0}resetPage(){this.page=0}async getTrends(e,t){if(arguments.length<2)try{this.page+=1;const t=await d.default.get(`${this.baseURL}trending/movie/${e}?api_key=${this.key}&page=${this.page}`);return console.log(t.data.results),t.data.results}catch(e){console.log(e)}else try{const i=await d.default.get(`${this.baseURL}trending/movie/${e}?api_key=${this.key}&page=${t}`);return console.log(i.data),i.data}catch(e){console.log(e)}}async getUpcoming(){try{const e=await d.default.get(`${this.baseURL}movie/upcoming?api_key=${this.key}`);return console.log(e.data.results),e.data.results}catch(e){console.log(e)}}async searchMovieByQuery(e,t){if(arguments.length<2)try{this.page+=1;return(await d.default.get(`${this.baseURL}search/movie?api_key=${this.key}&query=${e}&page=${this.page}`)).data.results}catch(e){console.log(e)}else try{return(await d.default.get(`${this.baseURL}search/movie?api_key=${this.key}&query=${e}&page=${t}`)).data}catch(e){console.log(e)}}async getMovieInfo(e){try{const t=await d.default.get(`${this.baseURL}movie/${e}?api_key=${this.key}`);return console.log(t.data),t.data}catch(e){console.log(e)}}async getMovieTrailer(e){try{const t=await d.default.get(`${this.baseURL}movie/${e}/videos?api_key=${this.key}`);return console.log(t.data.results[0]),t.data.results[0]}catch(e){console.log(e)}}async getGenresList(){try{const e=await d.default.get(`${this.baseURL}genre/movie/list?api_key=${this.key}`);return console.log(e.data.genres),e.data.genres}catch(e){console.log(e)}}async getMovieContries(){try{const e=await d.default.get(`${this.baseURL}configuration/countries?api_key=${this.key}`);return console.log(e.data),e.data}catch(e){console.log(e)}}}var m=(d=o("2shzp")).default;const g=new u;let p;async function h(e,t){const i=document.querySelector(`${t}`);let n="";for(const t of e){const{id:e,poster_path:i,title:a,release_date:s,vote_average:o}=t;n+=`<li class='cards__list-item' data-id='${e}'>\n                    \n    <img class='cards__list-img' loading="lazy" ${await f(i,a)} width='395' height='574'/>\n    \n                   <div class='weekly-trends__overlay'></div>\n                    <div class='cards__list-search'>                       \n                        <div class='cards__bloc-stars'>\n                          <h3 class='cards__list-title'>${a}</h3>\n                          <div class='cards__list-text'>${await y(e)}|${await v(s)}<span class='cards__list-span'></span></div>\n                        </div>  \n                        \n                        \n                    </div>\n                    <div class='cards__list-stars'>${await _(o)}</div>\n                </li>`}i&&(i.innerHTML=n)}async function v(e){if(!e)return"There is no release date";return await e.slice(0,4)}async function y(e){try{const t=await m.get(`https://api.themoviedb.org/3/movie/${e}`,{params:{api_key:"682127ed972e56f6bb70ae743d23c1d7"}});if(0===t.data.genres.length)return error;return t.data.genres.slice(0,2).map((e=>e.name)).join(", ")}catch(e){return console.log(e),"There are no genres"}}function _(e){let t="";if(!e)return t=`${r.repeat(5)}`,`<div>${t}</div>`;switch(Math.round(e)){case 0:t=`${r.repeat(5)}`;break;case 1:t=`${c}${r.repeat(4)}`;break;case 2:t=`${l}${r.repeat(4)}`;break;case 3:t=`${l}${c}${r.repeat(3)}`;break;case 4:t=`${l.repeat(2)}${r.repeat(3)}`;break;case 5:t=`${l.repeat(2)}${c}${r.repeat(2)}`;break;case 6:t=`${l.repeat(3)}${r.repeat(2)}`;break;case 7:t=`${l.repeat(3)}${c}${r}`;break;case 8:t=`${l.repeat(4)}${r}`;break;case 9:t=`${l.repeat(4)}${c}`;break;case 10:t=`${l.repeat(5)}`;break;default:throw new Error("Invalid rating")}return`<div>${t}</div>`}function f(e,t){return`\n    srcset="\n                https://image.tmdb.org/t/p/w500/${e} 500w,\n                https://image.tmdb.org/t/p/w300/${e} 342w,\n                https://image.tmdb.org/t/p/w185/${e} 185w"\n        src="https://image.tmdb.org/t/p/w500/${e}"\n\n        " sizes=" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw"   \n     alt='${t}'`}!async function(){try{const e=await g.getGenresList();p=e}catch(e){console.log(e)}}();class b{constructor(){this.keyValue="library",this.movies=localStorage.getItem(this.keyValue)}updateLocalStorage(){localStorage.setItem(this.keyValue,JSON.stringify(this.movies)),console.log(this.movies,"updated localS")}setLibrary(){const e=localStorage.getItem(this.keyValue);e?this.movies=JSON.parse(e):(localStorage.setItem(this.keyValue,JSON.stringify([])),this.movies=[]),console.log(this.movies,"this.movies")}addMovie(e){this.movies.push(e),this.updateLocalStorage()}deleteMovie(e){const t=this.movies.findIndex((t=>t.id===e.id));this.movies.splice(t,1),this.updateLocalStorage()}}const w=new b;function k(){if(w.setLibrary(),0===w.movies.length){if(!document.querySelector(".my-lib__no-movies"))return;document.querySelector(".my-lib__no-movies").classList.remove("visually-hidden"),document.querySelector(".my-lib__gallery-list").innerHTML=""}else h(w.movies,".my-lib__gallery-list")}w.setLibrary(),k();var L;L=new URL(o("kyEFX").resolve("lp5u4"),import.meta.url).toString();const $=new b;$.setLibrary();class S{constructor(e,t,i){this.btn=e,this.btnStateStorageKey=t,this.movie=i}setBtnState(){$.movies.some((e=>e.id===this.movie.id))?(this.btn.setAttribute("data-action","remove"),this.btn.textContent="Remove from library"):(this.btn.setAttribute("data-action","add"),this.btn.textContent="Add to library"),this.btn.addEventListener("click",(()=>{"add"===this.btn.getAttribute("data-action")?this.toAdd():this.toRemove()}))}toAdd(){$.addMovie(this.movie),this.btn.removeEventListener("click",this.toAdd),this.btn.setAttribute("data-action","remove"),localStorage.setItem(this.btnStateStorageKey,"remove"),this.btn.textContent="Remove from library"}toRemove(){$.deleteMovie(this.movie),this.btn.removeEventListener("click",this.toRemove),this.btn.setAttribute("data-action","add"),localStorage.setItem(this.btnStateStorageKey,"add"),this.btn.textContent="Add to library"}}const x=new u,M=document.getElementById("catalg"),E=document.getElementById("mylibraryMovielist"),U=document.getElementById("catalogMovielist"),F=document.querySelector(".modal-film"),R=document.querySelector(".overlay");function A(e){e&&e.addEventListener("click",H)}async function H(e){if(e.target.closest(".movielist-item"))try{const i=e.target.closest(".movielist-item").getAttribute("data-id"),n=await x.getMovieInfo(i);!function(e){F.innerHTML=e}(function({id:e,poster_path:i,title:n,overview:a,popularity:s,vote_average:o,vote_count:r,genres:l}){const c=d(i);function d(e){return`srcset="\n                https://image.tmdb.org/t/p/w500/${e} 500w,\n                https://image.tmdb.org/t/p/w300/${e} 342w,\n                https://image.tmdb.org/t/p/w185/${e} 185w"\n        src="https://image.tmdb.org/t/p/w500/${e}"\n\n        " sizes=" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw"   \n    `}return`<div class="modal-film__container" data-id=${e}>\n  <button class="modal-film__close">\n    <svg width="18" height="18" class="modal-film__close-icon">\n    <use href="${t(L)}#icon-close2"></use>       \n</svg>\n  </button>\n  <img ${c} loading="lazy" alt="movie-poster" class="modal-film__img" />\n  <div class="modal-film__card">\n    <h2 class="modal-film__title">${n}</h2>\n    <div class="modal-film__blok">\n      <ul class="modal-film__list attribute">\n        <li class="modal-film__link">Vote / Votes</li>\n        <li class="modal-film__link">Popularity</li>\n        <li class="modal-film__link">Genre</li>\n      </ul>\n\n      <ul class="modal-film__list">\n        <li class="modal-film__link-item item-votes">\n          <div class="vote">${o}</div>\n          &nbsp;/&nbsp;\n          <div class="votes">${r}</div>\n        </li>\n        <li class="modal-film__link-item popularity">${s}</li>\n        <li class="modal-film__link-item genres">${l.map((e=>e.name)).join(", ")}</li>\n      </ul>\n    </div>\n    <h3 class="modal-film__about">ABOUT</h3>\n    <p class="modal-film__about-txt">${a}\n    </p>\n    <button class="btn" id="mylibrary" data-action="add">Add to my library</button>`}(n));document.querySelector(".modal-film__close").addEventListener("click",I),F.classList.remove("hidden"),R.classList.remove("hidden"),document.body.style.overflow="hidden";const a=document.getElementById("mylibrary");new S(a,"modal-btn-attr",n).setBtnState()}catch(e){console.log(e)}}function I(){F.classList.add("hidden"),R.classList.add("hidden"),document.body.style.overflow="auto",k()}A(M),A(U),A(E),R.addEventListener("click",I),window.addEventListener("keydown",(function(e){"Escape"!==e.key||F.classList.contains("hidden")||I()}));d=o("2shzp");var B=o("94Fp6");const q={page:1,language:"en-US",api_key:"682127ed972e56f6bb70ae743d23c1d7"},T={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${q.api_key}`}},O={trendMoviesDay:"https://api.themoviedb.org/3/trending/movie/day",trendMoviesWeek:"https://api.themoviedb.org/3/trending/movie/week",upcomingMovies:"https://api.themoviedb.org/3/movie/upcoming"},G=(e,t)=>{const i=Math.floor(e),n=e%1>=.5?1:0,a=5-i-n;return`\n    ${B.fullStar.replace("star",t).repeat(i)}\n    ${B.halfStar.replace("star",t).repeat(n)}\n    ${B.emptyStar.replace("star",t).repeat(a)}\n  `},j=e=>{const t=((e,t)=>{const n=[];for(i=0;i<e.length;i+=1)t.includes(e[i].id)&&n.push(e[i].name);return n.slice(0,2).join(", ")})(B.genres,e.genre_ids),n=e.release_date.slice(0,4),a=e.vote_average/2,s=G(a,"card-star");return(0,B.topMoviesFragment)(e.id,e.backdrop_path,e.title,t,n,s,e.id)};function z(){document.querySelector("#hero").innerHTML=B.emptyApiResponeHero}const V=e=>d.default.get(e,{params:q,...T}).then((t=>{if(e.includes("day")){z()}else e.includes("week")?(e=>{const t=document.querySelector("#catalogMovielist");let i="";for(let t=0;t<3;t++)i+=j(e[t]);t.innerHTML=i})(t.data.results):e.includes("upcoming")&&(e=>{const t=document.querySelector("#upcoming"),i=e[Math.floor(Math.random()*e.length)];t.innerHTML=(0,B.upcomingMovieFragment)(i.id,i.backdrop_path,i.title,i.overview)})(t.data.results)})).catch((t=>{e.includes("day")&&0===length?z():console.log(t)}));(async()=>{await Promise.all([V(O.trendMoviesDay),V(O.trendMoviesWeek),V(O.upcomingMovies)])})(),o("8A8fF");
//# sourceMappingURL=index.8d5315a0.js.map
