var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequired7c6=a);var o=a("2shzp"),n=a("94Fp6");const l={page:1,language:"en-US",api_key:"682127ed972e56f6bb70ae743d23c1d7"},c={method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${l.api_key}`}},u={urlDay:"https://api.themoviedb.org/3/trending/movie/day",urlWeek:"https://api.themoviedb.org/3/trending/movie/week",urlSearch:"https://api.themoviedb.org/3/search/movie",url:"",title:"",quantity:20},s=e=>{let t=Math.floor(e),r=e%1>=.5?1:0,a=5-t-r;return`${n.fullStar.repeat(t)}${n.halfStar.repeat(r)}${n.emptyStar.repeat(a)}`},d=e=>{const t=((e,t)=>{const r=[];for(i=0;i<e.length;i+=1)t.includes(e[i].id)&&r.push(e[i].name);return r.slice(0,2).join(", ")})(n.genres,e.genre_ids),r=e.release_date.slice(0,4),a=e.vote_average/2,o=s(a);return(0,n.topMoviesFragment)(e.id,e.backdrop_path,e.title,t,r,o)},p=()=>{document.querySelector("#catalogSection");catalogSection.innerHTML=n.emptyApiResponeCatalog},g=e=>{const t=document.querySelector("#catalg");let r="";e.forEach((e=>{r+=d(e)})),t.innerHTML=r},h=(e,t)=>{const r=document.querySelector("#pagesBtnSection"),a=Math.ceil(e/t);a<2||(r.innerHTML=(0,n.pagesBtnStartup)(a))};function m(){document.querySelector("#hero").innerHTML=n.emptyApiResponeHero}const f=e=>o.default.get(e,{params:l,...c}).then((t=>{const r=t.data.results.length;if(e.includes("day"))return 0===r?void m():void(e=>{const t=document.querySelector("#hero"),r=Math.floor(Math.random()*e.data.results.length),a=e.data.results[r],o=(l=a.overview,i=200,l.length>i?l.slice(0,i)+"...":l);var l,i;const c=a.vote_average/2,u=s(c);t.innerHTML=(0,n.heroFragment)(a.id,a.backdrop_path,a.title,u,o)})(t);0!==r?(u.url=e,g(t.data.results),h(t.data.total_results,20)):p()})).catch((e=>(p(),m(),console.log(e))));(async()=>{await Promise.all([f(u.urlDay),f(u.urlWeek)])})();const v=e=>o.default.get(e,{params:l,...c}).then((e=>{const t=e.data.results.length;if(document.querySelector("#catalg").hasChildNodes()){document.querySelectorAll("#catalg > li").forEach((e=>e.remove()))}null!==document.querySelector("#navForm")&&document.querySelector("#navForm").remove(),0!==t?(console.log(e),g(e.data.results),h(e.data.total_results,20)):p()})).catch((e=>(p(),console.log(e))));window.addEventListener("click",(e=>{console.log(e.target.parentElement.id);try{if("searchBtn"===e.target.id){if(e.preventDefault(),console.log(document.querySelector("#catalogFormInput").value.trim()),""==document.querySelector("#catalogFormInput").value.trim())return;u.url="https://api.themoviedb.org/3/search/movie",l.page=1,u.title=document.querySelector("#catalogFormInput").value.trim();const t=`${u.url}?query=${u.title}&include_adult=false`;(async()=>await v(t))(),console.log(u)}if("navForm"===e.target.parentElement.id){e.preventDefault(),l.page=e.target.textContent;let t=u.url;t.includes("search")&&(t+=`?query=${u.title}&include_adult=false`,console.log(t));(async()=>await v(t))()}}catch(e){console.error(e)}}));
//# sourceMappingURL=catalog.6c5ecc70.js.map
