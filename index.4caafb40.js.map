{"mappings":"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","sources":["src/js/api-home.js"],"sourcesContent":["import axios from 'axios';\nimport {\n  genres,\n  fullStar,\n  halfStar,\n  emptyStar,\n  heroFragment,\n  topMoviesFragment,\n  upcomingMovieFragment,\n  emptyApiResponeHero,\n} from './api-html-fragment.js';\n\nconst params = {\n  page: 1,\n  language: 'en-US',\n  api_key: '682127ed972e56f6bb70ae743d23c1d7',\n};\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${params.api_key}`,\n  },\n};\n\nconst urls = {\n  trendMoviesDay: `https://api.themoviedb.org/3/trending/movie/day`,\n  trendMoviesWeek: `https://api.themoviedb.org/3/trending/movie/week`,\n  upcomingMovies: `https://api.themoviedb.org/3/movie/upcoming`,\n};\nconst generateStars = (rating, starClass) => {\n  const fullStars = Math.floor(rating);\n  const halfStars = rating % 1 >= 0.5 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStars;\n\n  return `\n    ${fullStar.replace('star', starClass).repeat(fullStars)}\n    ${halfStar.replace('star', starClass).repeat(halfStars)}\n    ${emptyStar.replace('star', starClass).repeat(emptyStars)}\n  `;\n};\n\nconst createHeroMovie = resResponse => {\n  const maxLength = 200;\n  const heroSection = document.querySelector('#hero');\n  const randomMovieIndex = Math.floor(\n    Math.random() * resResponse.data.results.length\n  );\n  const topDayMovie = resResponse.data.results[randomMovieIndex];\n  const cutText = (text, maxLength) =>\n    text.length > maxLength ? text.slice(0, maxLength) + '...' : text;\n  const truncatedOverview = cutText(topDayMovie.overview, maxLength);\n  const rating = topDayMovie.vote_average / 2;\n  const starsHTML = generateStars(rating, 'hero-star');\n\n  heroSection.innerHTML = heroFragment(\n    topDayMovie.id,\n    topDayMovie.backdrop_path,\n    topDayMovie.title,\n    starsHTML,\n    truncatedOverview\n  );\n};\n\nconst movieGenresCompare = (arr1, arr2) => {\n  const finalArr = [];\n  for (let i = 0; i < arr1.length; i += 1) {\n    if (arr2.includes(arr1[i].id)) {\n      finalArr.push(arr1[i].name);\n    }\n  }\n\n  return finalArr.slice(0, 2).join(', ');\n};\n\nconst catalogItem = movie => {\n  const movieGenres = movieGenresCompare(genres, movie.genre_ids);\n  const releaseYear = movie.release_date.slice(0, 4);\n  const rating = movie.vote_average / 2;\n  const starsHTML = generateStars(rating, 'card-star');\n  return topMoviesFragment(\n    movie.id,\n    movie.backdrop_path,\n    movie.title,\n    movieGenres,\n    releaseYear,\n    starsHTML,\n    movie.id\n  );\n};\n\nconst crateCatalog = movies => {\n  const moviesCatalog = document.querySelector('#catalogMovielist');\n  let weekMoviesSectionFragment = '';\n  for (let index = 0; index < 3; index++) {\n    weekMoviesSectionFragment =\n      weekMoviesSectionFragment + catalogItem(movies[index]);\n  }\n  moviesCatalog.innerHTML = weekMoviesSectionFragment;\n};\n\nconst createUpcomingMovie = movies => {\n  const upcomingSection = document.querySelector('#upcoming');\n  const randomMovie = Math.floor(Math.random() * movies.length);\n  const upcomingMovie = movies[randomMovie];\n  const movieGenres = movieGenresCompare(genres, upcomingMovie.genre_ids);\n  const roundedVoteAverage = Math.round(upcomingMovie.vote_average * 10) / 10;\n  const roundedVPopularity = parseInt(upcomingMovie.popularity);\n  upcomingSection.innerHTML = upcomingMovieFragment(\n    upcomingMovie.id,\n    upcomingMovie.backdrop_path,\n    upcomingMovie.title,\n    upcomingMovie.overview,\n    upcomingMovie.release_date,\n    roundedVoteAverage,\n    upcomingMovie.vote_count,\n    roundedVPopularity,\n    movieGenres\n  );\n};\nfunction updateTextHero(description) {\n  const heroText = document.getElementById('hero_text');\n\n  if (window.innerWidth >= 768) {\n    heroText.textContent =\n      description ||\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.\";\n  } else {\n    heroText.textContent =\n      description ||\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers.\";\n    heroText.classList.add('hero_text_2');\n  }\n}\n\nfunction createDefaultHeroSection() {\n  const heroSection = document.querySelector('#hero');\n  heroSection.innerHTML = emptyApiResponeHero;\n  updateTextHero();\n  window.addEventListener('resize', () => updateTextHero());\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  createDefaultHeroSection();\n});\n\nconst homePageApiData = url =>\n  axios\n    .get(url, { params, ...options })\n    .then(resResponse => {\n      if (url.includes('day')) {\n        const length = resResponse.data.results.length;\n        // const length = 0;\n        if (length === 0) {\n          createDefaultHeroSection();\n          return;\n        }\n\n        createHeroMovie(resResponse);\n        return;\n      }\n      if (url.includes('week')) {\n\n        crateCatalog(resResponse.data.results);\n        return;\n      }\n      if (url.includes('upcoming')) {\n\n        createUpcomingMovie(resResponse.data.results);\n        return;\n      }\n    })\n    .catch(error => {\n      if (url.includes('day')) {\n        if (length === 0) {\n          createDefaultHeroSection();\n          return;\n        }\n      }\n      console.log(error);\n    });\n\nconst homePageContent = async () =>\n  await Promise.all([\n    homePageApiData(urls.trendMoviesDay),\n    homePageApiData(urls.trendMoviesWeek),\n    homePageApiData(urls.upcomingMovies),\n  ]);\n\nhomePageContent();\n\nwindow.addEventListener('click', event => {\n  if (event.target.parentElement.id === 'logo') {\n    const moviesCatalog = document.querySelector('#trends');\n    moviesCatalog.remove();\n\n    const upcomingSection = document.querySelector('#upcoming');\n    const upcomingChild = document.querySelector('#upcoming > div');\n    upcomingSection.removeChild(upcomingChild);\n\n    const heroSection = document.querySelector('#hero');\n    const heroChild = document.querySelector('#hero > div');\n    heroSection.removeChild(heroChild);\n\n    params.api_key = '';\n    const serverErrorContent = async () =>\n      await Promise.all([\n        homePageApiData(urls.trendMoviesDay),\n        homePageApiData(urls.trendMoviesWeek),\n        homePageApiData(urls.upcomingMovies),\n      ]);\n    serverErrorContent();\n  }\n});\n"],"names":["$bpxeT","parcelRequire","$3a55cfafb3b9c261$var$params","page","language","api_key","$3a55cfafb3b9c261$var$options","method","headers","accept","Authorization","concat","$3a55cfafb3b9c261$var$urls","$3a55cfafb3b9c261$var$generateStars","rating","starClass","fullStars","Math","floor","halfStars","emptyStars","$8OCXI","fullStar","replace","repeat","halfStar","emptyStar","$3a55cfafb3b9c261$var$movieGenresCompare","arr1","arr2","finalArr","i","length","includes","id","push","name","slice","join","$3a55cfafb3b9c261$var$updateTextHero","description","heroText","document","getElementById","window","innerWidth","textContent","classList","add","$3a55cfafb3b9c261$var$createDefaultHeroSection","querySelector","innerHTML","emptyApiResponeHero","addEventListener","$3a55cfafb3b9c261$var$homePageApiData","url","$dIxxU","default","get","$parcel$interopDefault","$dDDEV","params","then","resResponse","movies","upcomingSection","upcomingMovie","movieGenres","roundedVoteAverage","roundedVPopularity","data","results","text","maxLength","heroSection","randomMovieIndex","random","topDayMovie","truncatedOverview","overview","vote_average","starsHTML","heroFragment","backdrop_path","title","$3a55cfafb3b9c261$var$createHeroMovie","movie","releaseYear","moviesCatalog","weekMoviesSectionFragment","index","genres","genre_ids","release_date","topMoviesFragment","$3a55cfafb3b9c261$var$crateCatalog","round","parseInt","popularity","upcomingMovieFragment","vote_count","catch","error","console","log","$3a55cfafb3b9c261$var$homePageContent","$2TvXO","mark","_callee","Promise","all","event","target","parentElement","remove","upcomingChild","removeChild","heroChild","serverErrorContent"],"version":3,"file":"index.4caafb40.js.map"}