function t(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},a={},n=i.parcelRequired7c6;null==n&&((n=function(t){if(t in s)return s[t].exports;if(t in a){var e=a[t];delete a[t];var i={id:t,exports:{}};return s[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){a[t]=e},i.parcelRequired7c6=n),n.register("kyEFX",(function(e,i){var s,a;t(e.exports,"register",(function(){return s}),(function(t){return s=t})),t(e.exports,"resolve",(function(){return a}),(function(t){return a=t}));var n={};s=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)n[e[i]]=t[e[i]]},a=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),n("kyEFX").register(JSON.parse('{"Ujaud":"index.bd355293.js","lp5u4":"sprite.5d6e6df3.svg","kPZpr":"catalog.5a8a559f.js"}'));var o=n("2shzp");class r{constructor(){this.key="682127ed972e56f6bb70ae743d23c1d7",this.baseURL="https://api.themoviedb.org/3/",this.page=0}resetPage(){this.page=0}async getTrends(t,e){if(arguments.length<2)try{this.page+=1;const e=await o.default.get(`${this.baseURL}trending/movie/${t}?api_key=${this.key}&page=${this.page}`);return console.log(e.data.results),e.data.results}catch(t){console.log(t)}else try{const i=await o.default.get(`${this.baseURL}trending/movie/${t}?api_key=${this.key}&page=${e}`);return console.log(i.data),i.data}catch(t){console.log(t)}}async getUpcoming(){try{const t=await o.default.get(`${this.baseURL}movie/upcoming?api_key=${this.key}`);return console.log(t.data.results),t.data.results}catch(t){console.log(t)}}async searchMovieByQuery(t,e){if(arguments.length<2)try{this.page+=1;return(await o.default.get(`${this.baseURL}search/movie?api_key=${this.key}&query=${t}&page=${this.page}`)).data.results}catch(t){console.log(t)}else try{return(await o.default.get(`${this.baseURL}search/movie?api_key=${this.key}&query=${t}&page=${e}`)).data}catch(t){console.log(t)}}async getMovieInfo(t){try{const e=await o.default.get(`${this.baseURL}movie/${t}?api_key=${this.key}`);return console.log(e.data),e.data}catch(t){console.log(t)}}async getMovieTrailer(t){try{const e=await o.default.get(`${this.baseURL}movie/${t}/videos?api_key=${this.key}`);return console.log(e.data.results[0]),e.data.results[0]}catch(t){console.log(t)}}async getGenresList(){try{const t=await o.default.get(`${this.baseURL}genre/movie/list?api_key=${this.key}`);return console.log(t.data.genres),t.data.genres}catch(t){console.log(t)}}async getMovieContries(){try{const t=await o.default.get(`${this.baseURL}configuration/countries?api_key=${this.key}`);return console.log(t.data),t.data}catch(t){console.log(t)}}}var l;l=new URL(n("kyEFX").resolve("lp5u4"),import.meta.url).toString();class c{constructor(){this.keyValue="library",this.movies=localStorage.getItem(this.keyValue)}updateLocalStorage(){localStorage.setItem(this.keyValue,JSON.stringify(this.movies)),console.log(this.movies,"updated localS")}setLibrary(){const t=localStorage.getItem(this.keyValue);t?this.movies=JSON.parse(t):(localStorage.setItem(this.keyValue,JSON.stringify([])),this.movies=[]),console.log(this.movies,"this.movies")}addMovie(t){this.movies.push(t),this.updateLocalStorage()}deleteMovie(t){const e=this.movies.findIndex((e=>e.id===t.id));this.movies.splice(e,1),this.updateLocalStorage()}}const d=new c;d.setLibrary();class m{constructor(t,e,i){this.btn=t,this.btnStateStorageKey=e,this.movie=i}setBtnState(){d.movies.some((t=>t.id===this.movie.id))?(this.btn.setAttribute("data-action","remove"),this.btn.textContent="Remove from library"):(this.btn.setAttribute("data-action","add"),this.btn.textContent="Add to library"),this.btn.addEventListener("click",(()=>{"add"===this.btn.getAttribute("data-action")?this.toAdd():this.toRemove()}))}toAdd(){d.addMovie(this.movie),this.btn.removeEventListener("click",this.toAdd),this.btn.setAttribute("data-action","remove"),localStorage.setItem(this.btnStateStorageKey,"remove"),this.btn.textContent="Remove from library"}toRemove(){d.deleteMovie(this.movie),this.btn.removeEventListener("click",this.toRemove),this.btn.setAttribute("data-action","add"),localStorage.setItem(this.btnStateStorageKey,"add"),this.btn.textContent="Add to library"}}const u='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_405_766)" stroke-linejoin="round"/>\n<defs>\n<linearGradient id="paint0_linear_405_766" x1="3.375" y1="2.625" x2="13.5" y2="16.5" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>',p='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="rgba(248, 65, 25, 1)" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_405_766)" stroke-linejoin="round"/>\n<defs>\n<linearGradient id="paint0_linear_405_766" x1="3.375" y1="2.625" x2="13.5" y2="16.5" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>',g='<svg class="star" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M16.875 7.3125H10.8281L9 1.6875L7.17188 7.3125H1.125L6.04688 10.6875L4.14844 16.3125L9 12.7969L13.8516 16.3125L11.9531 10.6875L16.875 7.3125Z" stroke="url(#paint0_linear_148_6991)" stroke-linejoin="round"/>\n<path d="M9 1.6875V12.7969L4.14844 16.3125L6.04688 10.6875L1.125 7.3125H7.17188L9 1.6875Z" fill="url(#paint1_linear_148_6991)"/>\n<defs>\n<linearGradient id="paint0_linear_148_6991" x1="3.04877" y1="2.73251" x2="13.478" y2="16.7124" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n<linearGradient id="paint1_linear_148_6991" x1="2.08688" y1="2.73251" x2="12.1506" y2="9.47748" gradientUnits="userSpaceOnUse">\n<stop stop-color="#F84119"/>\n<stop offset="1" stop-color="#F89F19" stop-opacity="0.68"/>\n</linearGradient>\n</defs>\n</svg>';var h=(o=n("2shzp")).default;const v=new r;let y;async function f(t,e){const i=document.querySelector(`${e}`);let s="";for(const e of t){const{id:t,poster_path:i,title:a,release_date:n,vote_average:o}=e;s+=`<li class='cards__list-item' data-id='${t}'>\n                    \n    <img class='cards__list-img' loading="lazy" ${await $(i,a)} width='395' height='574'/>\n    \n                   <div class='weekly-trends__overlay'></div>\n                    <div class='cards__list-search'>                       \n                        <div class='cards__bloc-stars'>\n                          <h3 class='cards__list-title'>${a}</h3>\n                          <div class='cards__list-text'>${await b(t)}|${await _(n)}<span class='cards__list-span'></span></div>\n                        </div>  \n                        \n                        \n                    </div>\n                    <div class='cards__list-stars'>${await w(o)}</div>\n                </li>`}i&&(i.innerHTML=s)}async function _(t){if(!t)return"There is no release date";return await t.slice(0,4)}async function b(t){try{const e=await h.get(`https://api.themoviedb.org/3/movie/${t}`,{params:{api_key:"682127ed972e56f6bb70ae743d23c1d7"}});if(0===e.data.genres.length)return error;return e.data.genres.slice(0,2).map((t=>t.name)).join(", ")}catch(t){return console.log(t),"There are no genres"}}function w(t){let e="";if(!t)return e=`${u.repeat(5)}`,`<div>${e}</div>`;switch(Math.round(t)){case 0:e=`${u.repeat(5)}`;break;case 1:e=`${g}${u.repeat(4)}`;break;case 2:e=`${p}${u.repeat(4)}`;break;case 3:e=`${p}${g}${u.repeat(3)}`;break;case 4:e=`${p.repeat(2)}${u.repeat(3)}`;break;case 5:e=`${p.repeat(2)}${g}${u.repeat(2)}`;break;case 6:e=`${p.repeat(3)}${u.repeat(2)}`;break;case 7:e=`${p.repeat(3)}${g}${u}`;break;case 8:e=`${p.repeat(4)}${u}`;break;case 9:e=`${p.repeat(4)}${g}`;break;case 10:e=`${p.repeat(5)}`;break;default:throw new Error("Invalid rating")}return`<div>${e}</div>`}function $(t,e){return`\n    srcset="\n                https://image.tmdb.org/t/p/w500/${t} 500w,\n                https://image.tmdb.org/t/p/w300/${t} 342w,\n                https://image.tmdb.org/t/p/w185/${t} 185w"\n        src="https://image.tmdb.org/t/p/w500/${t}"\n\n        " sizes=" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw"   \n     alt='${e}'`}!async function(){try{const t=await v.getGenresList();y=t}catch(t){console.log(t)}}();const L=new c;function k(){if(L.setLibrary(),0===L.movies.length){if(!document.querySelector(".my-lib__no-movies"))return;document.querySelector(".my-lib__no-movies").classList.remove("visually-hidden"),document.querySelector(".my-lib__gallery-list").innerHTML=""}else f(L.movies,".my-lib__gallery-list")}L.setLibrary(),k();const x=new r,S=document.getElementById("catalg"),U=document.getElementById("mylibraryMovielist"),E=document.getElementById("catalogMovielist"),M=document.querySelector(".modal-film"),R=document.querySelector(".overlay");function F(t){t&&t.addEventListener("click",A)}async function A(t){if(t.target.closest(".movielist-item"))try{const i=t.target.closest(".movielist-item").getAttribute("data-id"),s=await x.getMovieInfo(i);!function(t){M.innerHTML=t}(function({id:t,poster_path:i,title:s,overview:a,popularity:n,vote_average:o,vote_count:r,genres:c}){const d=m(i);function m(t){return`srcset="\n                https://image.tmdb.org/t/p/w500/${t} 500w,\n                https://image.tmdb.org/t/p/w300/${t} 342w,\n                https://image.tmdb.org/t/p/w185/${t} 185w"\n        src="https://image.tmdb.org/t/p/w500/${t}"\n\n        " sizes=" (min-width: 768px) 500px, (min-width: 480px) 342px, (min-width: 320px) 185px, 100vw"   \n    `}return`<div class="modal-film__container" data-id=${t}>\n  <button class="modal-film__close">\n    <svg width="18" height="18" class="modal-film__close-icon">\n    <use href="${e(l)}#icon-close2"></use>       \n</svg>\n  </button>\n  <img ${d} loading="lazy" alt="movie-poster" class="modal-film__img" />\n  <div class="modal-film__card">\n    <h2 class="modal-film__title">${s}</h2>\n    <div class="modal-film__blok">\n      <ul class="modal-film__list attribute">\n        <li class="modal-film__link">Vote / Votes</li>\n        <li class="modal-film__link">Popularity</li>\n        <li class="modal-film__link">Genre</li>\n      </ul>\n\n      <ul class="modal-film__list">\n        <li class="modal-film__link-item item-votes">\n          <div class="vote">${o}</div>\n          &nbsp;/&nbsp;\n          <div class="votes">${r}</div>\n        </li>\n        <li class="modal-film__link-item popularity">${n}</li>\n        <li class="modal-film__link-item genres">${c.map((t=>t.name)).join(", ")}</li>\n      </ul>\n    </div>\n    <h3 class="modal-film__about">ABOUT</h3>\n    <p class="modal-film__about-txt">${a}\n    </p>\n    <button class="btn" id="mylibrary" data-action="add">Add to my library</button>`}(s));document.querySelector(".modal-film__close").addEventListener("click",H),M.classList.remove("hidden"),R.classList.remove("hidden"),document.body.style.overflow="hidden";const a=document.getElementById("mylibrary");new m(a,"modal-btn-attr",s).setBtnState()}catch(t){console.log(t)}}function H(){M.classList.add("hidden"),R.classList.add("hidden"),document.body.style.overflow="auto",k()}F(S),F(E),F(U),R.addEventListener("click",H),window.addEventListener("keydown",(function(t){"Escape"!==t.key||M.classList.contains("hidden")||H()}));
//# sourceMappingURL=index.bd355293.js.map
