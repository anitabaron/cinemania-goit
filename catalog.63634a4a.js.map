{"mappings":"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","sources":["src/js/api-catalog-page.js"],"sourcesContent":["import axios from 'axios';\nimport {genres, fullStar, halfStar, emptyStar, \n        heroFragment, topMoviesFragment, \n        pagesBtnStartup, emptyApiResponeHero, \n        emptyApiResponeCatalog} from './api-html-fragment.js'\n\nconst params = {\n  page: 1,\n  language: 'en-US',\n  api_key: '682127ed972e56f6bb70ae743d23c1d7',\n};\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${params.api_key}`,\n  },\n};\n\nconst urls = {\n\n  urlDay: `https://api.themoviedb.org/3/trending/movie/day`,\n  urlWeek: `https://api.themoviedb.org/3/trending/movie/week`,\n  page:1,\n  quantity: 20,\n};\n\nconst generateStars = rating => {\n    let fullStars = Math.floor(rating);\n    let halfStars = rating % 1 >= 0.5 ? 1 : 0;\n    let emptyStars = 5 - fullStars - halfStars;\n    return `${fullStar.repeat(fullStars)}${halfStar.repeat(\n      halfStars\n    )}${emptyStar.repeat(emptyStars)}`;\n  };\n  \nconst createHeroMovie = resResponse => {\n    const maxLength = 200;\n    const heroSection = document.querySelector('#hero');\n    const randomMovieIndex = Math.floor(Math.random() * resResponse.data.results.length);\n    const topDayMovie = resResponse.data.results[randomMovieIndex];\n    \n    const cutText = (text, maxLength) => text.length > maxLength ? text.slice(0, maxLength) + '...' : text;\n    const truncatedOverview = cutText(topDayMovie.overview, maxLength);\n    const rating = topDayMovie.vote_average / 2;\n    const starsHTML = generateStars(rating);\n\n    heroSection.innerHTML =heroFragment(topDayMovie.id, topDayMovie.backdrop_path, topDayMovie.title, starsHTML, truncatedOverview)\n  };\n\n//nie dziaÅ‚a\nconst movieGenresCompare = (arr1, arr2) => {\n\tconst finalArr = [];\n\tfor (i = 0; i < arr1.length; i += 1) {\n\t\t\t\tif (arr2.includes(arr1[i].id)) {\n\t\t\t\t\tfinalArr.push(arr1[i].name)\n\t\t\t\t}\n\t\t\t}\n\treturn finalArr.slice(0,2).join(\", \");\n}\n\nconst catalogItem = (movie) =>{\n    const movieGenres = movieGenresCompare(movie.genre_ids, genres)\n    const releaseYear = movie.release_date.slice(0, 4);\n    const rating = movie.vote_average / 2;\n    const starsHTML = generateStars(rating);\n    console.log(movieGenres)\n    return topMoviesFragment(movie.id, movie.backdrop_path, movie.title, movieGenres, releaseYear, starsHTML)\n}\nconst emptyResponseCatalog = ()=>{\n    const moviesCatalog = document.querySelector('#catalogSection');\n    catalogSection.innerHTML = emptyApiResponeCatalog\n}\nconst crateCatalog = (movies)=>{\n    const moviesCatalog = document.querySelector('#catalg');\n    let weekMoviesSectionFragment=\"\"\n    movies.forEach( (movie) =>{ \n        weekMoviesSectionFragment = weekMoviesSectionFragment + catalogItem(movie)\n    });\nmoviesCatalog.innerHTML=weekMoviesSectionFragment\n}\nconst createPagesBtn =(totalItems, itemsPerPage) =>{\n    const pagesBtnSection = document.querySelector('#pagesBtnSection');\n    const lastPage = (totalItems / itemsPerPage)\n    pagesBtnSection.innerHTML=pagesBtnStartup(lastPage)\n   \n}\n  function createDefaultHeroSection() {\n    const heroSection = document.querySelector('#hero');\n    heroSection.innerHTML = emptyApiResponeHero;}\n\nconst homePageApiData = url =>\n  axios\n    .get(url, { params, ...options })\n    .then(resResponse => {\n        const length=resResponse.data.results.length\n        //const length = 0\n        if (url.includes('day')) {\n            \n            if (length===0){\n               createDefaultHeroSection()\n               return;\n            }\n            createHeroMovie(resResponse)\n            return;\n        }\n        if (length===0){\n            emptyResponseCatalog()\n            return;\n          }\n        crateCatalog(resResponse.data.results)\n        createPagesBtn(resResponse.data.total_results, 20)\n        return;\n    })\n    .catch(error => {\n        emptyResponseCatalog()\n        createDefaultHeroSection()\n      return console.log(error)});\n\nconst homePageContent = async () => \n    await Promise.all([\n        homePageApiData(urls.urlDay),\n        homePageApiData(urls.urlWeek)\n      ]);\n\nhomePageContent();\n\n"],"names":["$bpxeT","parcelRequire","$f8ea9dc2e6a98a8c$var$params","page","language","api_key","$f8ea9dc2e6a98a8c$var$options","method","headers","accept","Authorization","concat","$f8ea9dc2e6a98a8c$var$urls","$f8ea9dc2e6a98a8c$var$generateStars","rating","fullStars","Math","floor","halfStars","emptyStars","$8OCXI","fullStar","repeat","halfStar","emptyStar","$f8ea9dc2e6a98a8c$var$catalogItem","movie","movieGenres","arr1","arr2","finalArr","i","length","includes","id","push","name","slice","join","$f8ea9dc2e6a98a8c$var$movieGenresCompare","genre_ids","genres","releaseYear","release_date","vote_average","starsHTML","console","log","topMoviesFragment","backdrop_path","title","$f8ea9dc2e6a98a8c$var$emptyResponseCatalog","document","querySelector","catalogSection","innerHTML","emptyApiResponeCatalog","$f8ea9dc2e6a98a8c$var$createDefaultHeroSection","emptyApiResponeHero","$f8ea9dc2e6a98a8c$var$homePageApiData","url","$dIxxU","default","get","$parcel$interopDefault","$dDDEV","params","then","resResponse","movies","moviesCatalog","weekMoviesSectionFragment","totalItems","lastPage","data","results","text","maxLength","heroSection","randomMovieIndex","random","topDayMovie","truncatedOverview","overview","heroFragment","$f8ea9dc2e6a98a8c$var$createHeroMovie","forEach","total_results","pagesBtnStartup","catch","error","$f8ea9dc2e6a98a8c$var$homePageContent","$2TvXO","mark","_callee","Promise","all"],"version":3,"file":"catalog.63634a4a.js.map"}