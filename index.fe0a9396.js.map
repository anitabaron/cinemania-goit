{"mappings":"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","sources":["src/js/api-home.js"],"sourcesContent":["import axios from 'axios';\nimport {\n  genres,\n  fullStar,\n  halfStar,\n  emptyStar,\n  heroFragment,\n  topMoviesFragment,\n  upcomingMovieFragment,\n  emptyApiResponeHero,\n} from './api-html-fragment.js';\n\nconst params = {\n  page: 1,\n  language: 'en-US',\n  api_key: '682127ed972e56f6bb70ae743d23c1d7',\n};\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization: `Bearer ${params.api_key}`,\n  },\n};\n\nconst urls = {\n  trendMoviesDay: `https://api.themoviedb.org/3/trending/movie/day`,\n  trendMoviesWeek: `https://api.themoviedb.org/3/trending/movie/week`,\n  upcomingMovies: `https://api.themoviedb.org/3/movie/upcoming`,\n};\nconst generateStars = (rating, starClass) => {\n  const fullStars = Math.floor(rating);\n  const halfStars = rating % 1 >= 0.5 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStars;\n\n  return `\n    ${fullStar.replace('star', starClass).repeat(fullStars)}\n    ${halfStar.replace('star', starClass).repeat(halfStars)}\n    ${emptyStar.replace('star', starClass).repeat(emptyStars)}\n  `;\n};\n\nconst createHeroMovie = resResponse => {\n  const maxLength = 200;\n  const heroSection = document.querySelector('#hero');\n  const randomMovieIndex = Math.floor(\n    Math.random() * resResponse.data.results.length\n  );\n  const topDayMovie = resResponse.data.results[randomMovieIndex];\n  const cutText = (text, maxLength) =>\n    text.length > maxLength ? text.slice(0, maxLength) + '...' : text;\n  const truncatedOverview = cutText(topDayMovie.overview, maxLength);\n  const rating = topDayMovie.vote_average / 2;\n  const starsHTML = generateStars(rating, 'hero-star');\n\n  heroSection.innerHTML = heroFragment(\n    topDayMovie.id,\n    topDayMovie.backdrop_path,\n    topDayMovie.title,\n    starsHTML,\n    truncatedOverview\n  );\n};\n\nconst movieGenresCompare = (arr1, arr2) => {\n  const finalArr = [];\n  for (let i = 0; i < arr1.length; i += 1) {\n    if (arr2.includes(arr1[i].id)) {\n      finalArr.push(arr1[i].name);\n    }\n  }\n\n  return finalArr.slice(0, 2).join(', ');\n};\n\nconst catalogItem = movie => {\n  const movieGenres = movieGenresCompare(genres, movie.genre_ids);\n  const releaseYear = movie.release_date.slice(0, 4);\n  const rating = movie.vote_average / 2;\n  const starsHTML = generateStars(rating, 'card-star');\n  return topMoviesFragment(\n    movie.id,\n    movie.backdrop_path,\n    movie.title,\n    movieGenres,\n    releaseYear,\n    starsHTML,\n    movie.id\n  );\n};\n\nconst crateCatalog = movies => {\n  const moviesCatalog = document.querySelector('#catalogMovielist');\n  let weekMoviesSectionFragment = '';\n  for (let index = 0; index < 3; index++) {\n    weekMoviesSectionFragment =\n      weekMoviesSectionFragment + catalogItem(movies[index]);\n  }\n  moviesCatalog.innerHTML = weekMoviesSectionFragment;\n};\n\nconst createUpcomingMovie = movies => {\n  const upcomingSection = document.querySelector('#upcoming');\n  const randomMovie = Math.floor(Math.random() * movies.length);\n  const upcomingMovie = movies[randomMovie];\n  const movieGenres = movieGenresCompare(genres, upcomingMovie.genre_ids);\n  const roundedVoteAverage = Math.round(upcomingMovie.vote_average * 10) / 10;\n  const roundedVPopularity = parseInt(upcomingMovie.popularity);\n  upcomingSection.innerHTML = upcomingMovieFragment(\n    upcomingMovie.id,\n    upcomingMovie.backdrop_path,\n    upcomingMovie.title,\n    upcomingMovie.overview,\n    upcomingMovie.release_date,\n    roundedVoteAverage,\n    upcomingMovie.vote_count,\n    roundedVPopularity,\n    movieGenres\n  );\n};\nfunction updateTextHero(description) {\n  const heroText = document.getElementById('hero_text');\n\n  if (window.innerWidth >= 768) {\n    heroText.textContent =\n      description ||\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers. Decorate your space, choose your films, and stock up on snacks for the full experience.\";\n  } else {\n    heroText.textContent =\n      description ||\n      \"Is a guide to creating a personalized movie theater experience. You'll need a projector, screen, and speakers.\";\n    heroText.classList.add('hero_text_2');\n  }\n}\n\nfunction createDefaultHeroSection() {\n  const heroSection = document.querySelector('#hero');\n  heroSection.innerHTML = emptyApiResponeHero;\n  updateTextHero();\n  window.addEventListener('resize', () => updateTextHero());\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  createDefaultHeroSection();\n});\n\nconst homePageApiData = url =>\n  axios\n    .get(url, { params, ...options })\n    .then(resResponse => {\n      if (url.includes('day')) {\n        const length = resResponse.data.results.length;\n        // const length = 0;\n        if (length === 0) {\n          createDefaultHeroSection();\n          return;\n        }\n\n        createHeroMovie(resResponse);\n        return;\n      }\n      if (url.includes('week')) {\n\n        crateCatalog(resResponse.data.results);\n        return;\n      }\n      if (url.includes('upcoming')) {\n\n        createUpcomingMovie(resResponse.data.results);\n        return;\n      }\n    })\n    .catch(error => {\n      if (url.includes('day')) {\n        if (length === 0) {\n          createDefaultHeroSection();\n          return;\n        }\n      }\n      console.log(error);\n    });\n\nconst homePageContent = async () =>\n  await Promise.all([\n    homePageApiData(urls.trendMoviesDay),\n    homePageApiData(urls.trendMoviesWeek),\n    homePageApiData(urls.upcomingMovies),\n  ]);\n\nhomePageContent();\n\nwindow.addEventListener('click', event => {\n  if (event.target.parentElement.id === 'logo') {\n    const moviesCatalog = document.querySelector('#trends');\n    moviesCatalog.remove();\n\n    const upcomingSection = document.querySelector('#upcoming');\n    const upcomingChild = document.querySelector('#upcoming > div');\n    upcomingSection.removeChild(upcomingChild);\n\n    const heroSection = document.querySelector('#hero');\n    const heroChild = document.querySelector('#hero > div');\n    heroSection.removeChild(heroChild);\n\n    params.api_key = '';\n    const serverErrorContent = async () =>\n      await Promise.all([\n        homePageApiData(urls.trendMoviesDay),\n        homePageApiData(urls.trendMoviesWeek),\n        homePageApiData(urls.upcomingMovies),\n      ]);\n    serverErrorContent();\n  }\n});\n"],"names":["$2shzp","parcelRequire","$36d31d62188e21d1$var$params","page","language","api_key","$36d31d62188e21d1$var$options","method","headers","accept","Authorization","$36d31d62188e21d1$var$urls","trendMoviesDay","trendMoviesWeek","upcomingMovies","$36d31d62188e21d1$var$generateStars","rating","starClass","fullStars","Math","floor","halfStars","emptyStars","$94Fp6","fullStar","replace","repeat","halfStar","emptyStar","$36d31d62188e21d1$var$movieGenresCompare","arr1","arr2","finalArr","i","length","includes","id","push","name","slice","join","$36d31d62188e21d1$var$catalogItem","movie","movieGenres","genres","genre_ids","releaseYear","release_date","vote_average","starsHTML","topMoviesFragment","backdrop_path","title","$36d31d62188e21d1$var$updateTextHero","description","heroText","document","getElementById","window","innerWidth","textContent","classList","add","$36d31d62188e21d1$var$createDefaultHeroSection","querySelector","innerHTML","emptyApiResponeHero","addEventListener","$36d31d62188e21d1$var$homePageApiData","url","default","get","then","resResponse","data","results","heroSection","randomMovieIndex","random","topDayMovie","truncatedOverview","text","overview","maxLength","heroFragment","$36d31d62188e21d1$var$createHeroMovie","movies","moviesCatalog","weekMoviesSectionFragment","index","$36d31d62188e21d1$var$crateCatalog","upcomingSection","upcomingMovie","roundedVoteAverage","round","roundedVPopularity","parseInt","popularity","upcomingMovieFragment","vote_count","$36d31d62188e21d1$var$createUpcomingMovie","catch","error","console","log","async","Promise","all","$36d31d62188e21d1$var$homePageContent","event","target","parentElement","remove","upcomingChild","removeChild","heroChild","serverErrorContent"],"version":3,"file":"index.fe0a9396.js.map"}